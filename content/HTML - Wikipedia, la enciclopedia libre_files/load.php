mw.loader.implement("jquery.hashchange",function(){(function($,window,undefined){'$:nomunge';var str_hashchange='hashchange',doc=document,fake_onhashchange,special=$.event.special,doc_mode=doc.documentMode,supports_onhashchange='on'+str_hashchange in window&&(doc_mode===undefined||doc_mode>7);function get_fragment(url){url=url||location.href;return'#'+url.replace(/^[^#]*#?(.*)$/,'$1');};$.fn[str_hashchange]=function(fn){return fn?this.bind(str_hashchange,fn):this.trigger(str_hashchange);};$.fn[str_hashchange].delay=50;special[str_hashchange]=$.extend(special[str_hashchange],{setup:function(){if(supports_onhashchange){return false;}$(fake_onhashchange.start);},teardown:function(){if(supports_onhashchange){return false;}$(fake_onhashchange.stop);}});fake_onhashchange=(function(){var self={},timeout_id,last_hash=get_fragment(),fn_retval=function(val){return val;},history_set=fn_retval,history_get=fn_retval;self.start=function(){timeout_id||poll();};self.stop=function(){timeout_id&&
clearTimeout(timeout_id);timeout_id=undefined;};function poll(){var hash=get_fragment(),history_hash=history_get(last_hash);if(hash!==last_hash){history_set(last_hash=hash,history_hash);$(window).trigger(str_hashchange);}else if(history_hash!==last_hash){location.href=location.href.replace(/#.*/,'')+history_hash;}timeout_id=setTimeout(poll,$.fn[str_hashchange].delay);};$.browser.msie&&!supports_onhashchange&&(function(){var iframe,iframe_src;self.start=function(){if(!iframe){iframe_src=$.fn[str_hashchange].src;iframe_src=iframe_src&&iframe_src+get_fragment();iframe=$('<iframe tabindex="-1" title="empty"/>').hide().one('load',function(){iframe_src||history_set(get_fragment());poll();}).attr('src',iframe_src||'javascript:0').insertAfter('body')[0].contentWindow;doc.onpropertychange=function(){try{if(event.propertyName==='title'){iframe.document.title=doc.title;}}catch(e){}};}};self.stop=fn_retval;history_get=function(){return get_fragment(iframe.location.href);};history_set=function(hash
,history_hash){var iframe_doc=iframe.document,domain=$.fn[str_hashchange].domain;if(hash!==history_hash){iframe_doc.title=doc.title;iframe_doc.open();domain&&iframe_doc.write('<script>document.domain="'+domain+'"</script>');iframe_doc.close();iframe.location.hash=hash;}};})();return self;})();})(jQuery,this);;},{},{});mw.loader.implement("mmv.base",function(){(function(mw){mw.mmv={};}(mediaWiki));;},{},{});mw.loader.implement("mmv.bootstrap",function(){(function(mw,$){var MMVB;function MultimediaViewerBootstrap(){this.validExtensions={'jpg':true,'jpeg':true,'gif':true,'svg':true,'png':true,'tiff':true,'tif':true};this.thumbs=[];this.$thumbs=$('.gallery .image img, a.image img');this.processThumbs();this.readinessCSSClass='mw-mmv-has-been-loaded';this.readinessWaitDuration=100;}MMVB=MultimediaViewerBootstrap.prototype;MMVB.loadViewer=function(){var deferred=$.Deferred(),bs=this;if(mw.config.get('wgMediaViewer')!==true){return deferred.reject();}mw.loader.using('mmv',function(){bs.
isCSSReady(deferred);},function(error){mw.log(error.message);deferred.reject(error.message);});return deferred.done(function(viewer){if(!bs.viewerInitialized){if(bs.thumbs.length){viewer.initWithThumbs(bs.thumbs);}bs.viewerInitialized=true;}});};MMVB.isCSSReady=function(deferred){var $dummy=$('<div class="'+this.readinessCSSClass+'">').appendTo($(document.body)),bs=this;if($dummy.css('display')==='inline'){$dummy.remove();deferred.resolve(bs.getViewer());}else{$dummy.remove();setTimeout(function(){bs.isCSSReady(deferred);},this.readinessWaitDuration);}};MMVB.processThumbs=function(){var bs=this;this.$thumbs.each(function(i,thumb){bs.processThumb(thumb);});};MMVB.processThumb=function(thumb){var $thumbCaption,caption,bs=this,$thumb=$(thumb),$link=$thumb.closest('a.image'),$thumbContain=$link.closest('.thumb'),$enlarge=$thumbContain.find('.magnify a'),title=mw.Title.newFromImg($thumb),link=$link.prop('href');if(!bs.validExtensions[title.getExtension().toLowerCase()]){return;}if($thumb.
closest('.metadata').length>0||$thumb.closest('.noarticletext').length>0){return;}if($thumbContain.length!==0&&$thumbContain.is('.thumb')){$thumbCaption=$thumbContain.find('.thumbcaption').clone();$thumbCaption.find('.magnify').remove();mw.mmv.ui.Element.prototype.whitelistHtml($thumbCaption);caption=$thumbCaption.html();}this.thumbs.push({thumb:thumb,$thumb:$thumb,title:title,link:link,caption:caption});if($thumbContain.length===0){$thumbContain=$link;}else if($thumbContain.is('.thumb')){$thumbContain=$thumbContain.find('.image');}$link.add($enlarge).click(function(e){return bs.click(this,e,title);});};MMVB.click=function(element,e,title){var $element=$(element);if(e.which!==1||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey){return;}if(mw.config.get('wgMediaViewerOnClick')!==true){return;}if($element.is('a.image')){mw.mmv.logger.log('thumbnail-link-click');}else if($element.is('.magnify a')){mw.mmv.logger.log('enlarge-link-click');}this.loadViewer().then(function(viewer){viewer.
loadImageByTitle(title.getPrefixedText(),true);});e.preventDefault();return false;};MMVB.hash=function(){if(!this.viewerInitialized&&window.location.hash.indexOf('#mediaviewer/')!==0){return;}if(this.skipNextHashHandling){this.skipNextHashHandling=false;return;}this.loadViewer().then(function(viewer){viewer.hash();});};MMVB.internalHashChange=function(e){this.skipNextHashHandling=true;window.location.hash=e.hash;};MMVB.getViewer=function(){if(this.viewer===undefined){this.viewer=new mw.mmv.MultimediaViewer();this.viewer.setupEventHandlers();}return this.viewer;};MMVB.setupEventHandlers=function(){var self=this;$(window).hashchange(function(){self.hash();}).hashchange();$(document).on('mmv.hash',function(e){self.internalHashChange(e);});};MMVB.cleanupEventHandlers=function(){$(window).off('hashchange');$(document).off('mmv.hash');};mw.mmv.MultimediaViewerBootstrap=MultimediaViewerBootstrap;}(mediaWiki,jQuery));;},{},{});mw.loader.implement("mmv.logger",function(){(function(mw,$){var L;
function Logger(){}L=Logger.prototype;L.logActions={'thumbnail-link-click':'User clicked on thumbnail to open lightbox.','enlarge-link-click':'User clicked on enlarge link to open lightbox.','fullscreen-link-click':'User clicked on fullscreen button in lightbox.','defullscreen-link-click':'User clicked on button to return to normal lightbox view.','close-link-click':'User clicked on the lightbox close button.','site-link-click':'User clicked on the link to the file description page.','use-this-file-link-click':'User clicked on the link to use this file.','image-view':'User viewed an image'};L.log=function(action,skipEventLog,substitutions){var translatedAction=this.logActions[action]||action;if($.isPlainObject(substitutions)){$.each(substitutions,function(key,value){translatedAction=translatedAction.replace(key,value);});}mw.log(translatedAction);if(mw.eventLog&&!skipEventLog){return mw.eventLog.logEvent('MediaViewer',{version:'1.1',action:action});}return $.Deferred().resolve();};mw.
mmv.logger=new Logger();}(mediaWiki,jQuery));;},{},{});mw.loader.implement("mmv.ui",function(){(function(mw,$){var EP;function Element($container){this.$container=$container;this.eventsRegistered={};}EP=Element.prototype;EP.whitelistHtml=function($el){var child,$prev,$child=$el.children().first();while($child&&$child.length){child=$child.get(0);if(child.nodeType!==child.ELEMENT_NODE){return;}this.whitelistHtml($child);if(!$child.is('a')){$prev=$child.prev();$child.replaceWith($child.contents());}else{$prev=$child;}if($prev&&$prev.length===1){$child=$prev.next();}else{$child=$el.children().first();}}};EP.set=function(){};EP.empty=function(){};EP.attach=function(){};EP.unattach=function(){this.clearEvents();};EP.handleEvent=function(name,handler){if(this.eventsRegistered[name]===undefined){this.eventsRegistered[name]=[];}this.eventsRegistered[name].push(handler);$(document).on(name,handler);};EP.clearEvents=function(){var i,handlers,thisevent,events=Object.keys(this.eventsRegistered);for
(i=0;i<events.length;i++){thisevent=events[i];handlers=this.eventsRegistered[thisevent];while(handlers.length>0){$(document).off(thisevent,handlers.pop());}}};mw.mmv.ui={};mw.mmv.ui.reuse={};mw.mmv.ui.Element=Element;}(mediaWiki,jQuery));;},{"css":[".mw-mlb-info-box{display:inline-block;overflow:hidden;width:100%;border:1px solid #DDDDDD;border-bottom:2px solid #C9C9C9;-webkit-border-radius:3px;border-radius:3px;background-clip:padding-box;background-color:#FFFFFF}\n/* cache key: eswiki:resourceloader:filter:minify-css:7:9131387e86599ef5a60c42be0d77bbc1 */"]},{});mw.loader.implement("mmv.bootstrap.autostart",function(){(function(mw,$){var bootstrap=new mw.mmv.MultimediaViewerBootstrap();$(document).ready(function(){bootstrap.setupEventHandlers();});mw.mmv.bootstrap=bootstrap;}(mediaWiki,jQuery));;},{},{});mw.loader.implement("schema.MediaViewer",function(){mediaWiki.eventLog.declareSchema("MediaViewer",{"schema":{"title":"MediaViewer","properties":{"version":{"type":"string","required"
:true},"action":{"type":"string","required":true,"enum":["thumbnail-link-click","enlarge-link-click","fullscreen-link-click","defullscreen-link-click","site-link-click","close-link-click","use-this-file-link-click","image-view"]}}},"revision":7670440});},{},{});
/* cache key: eswiki:resourceloader:filter:minify-js:7:c2a662e0aa07b7b5a8f68e53873ee476 */